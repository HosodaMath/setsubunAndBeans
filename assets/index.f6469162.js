var f=Object.defineProperty;var g=(a,e,n)=>e in a?f(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n;var i=(a,e,n)=>(g(a,typeof e!="symbol"?e+"":e,n),n);import{P as y}from"./vendor.6c0cdefa.js";const v=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};v();const u=(a,e,n)=>{const t=a.createGraphics(e,n),s=10,o=5;return[...Array(200).keys()].forEach(r=>{[...Array(100).keys()].forEach(d=>{let p=r*s,m=d*s;t.push(),t.translate(p,m),t.fill("#ffe4c4"),t.stroke("#fff6e9"),t.strokeWeight(o),t.rect(0,0,s,s),t.pop()})}),t};class w{constructor(e,n,t){i(this,"p");i(this,"velocity");i(this,"position");this.p=e,this.position=n,this.velocity=t}update(){this.position.add(this.velocity)}}class h extends w{constructor(e,n,t){super(e,n,t)}update(){this.position.add(this.velocity)}draw(){const e=20,n=e*.5;this.p.push(),this.p.translate(this.position.x,this.position.y),this.p.fill("#d4b48c"),this.p.ellipse(0,0,e,e),this.p.ellipse(0,n,e,e),this.p.pop()}isBeanRemove(){return this.p.height>this.position.y}}class B{constructor(e){i(this,"p");i(this,"beans");this.p=e,this.beans=[]}addNPCBeans(){const e=this.p.random(0,this.p.width),n=0,t=this.p.createVector(e,n),s=this.p.createVector(0,1);console.log(t.x,t.y);const o=new h(this.p,t,s);this.beans.push(o)}update(){this.p.frameCount%120==1&&this.addNPCBeans();for(const e of this.beans)e.update();this.beans=this.beans.filter(e=>e.isBeanRemove())}draw(){for(const e of this.beans)e.draw()}}class C extends h{constructor(e,n,t,s){super(e,n,t);i(this,"characterSize");this.characterSize=s}applyGravity(){const e=.15;this.velocity.y+=e}applyJump(){const e=-5;this.velocity.y=e}draw(){const e=this.characterSize,n=e*.5;this.p.push(),this.p.translate(this.position.x,this.position.y),this.p.fill("#d4b48c"),this.p.ellipse(0,0,e,e),this.p.ellipse(0,n,e,e),this.p.pop()}isBeanRemove(){return this.position.y<this.p.height}}class b{constructor(e){i(this,"p");i(this,"mobBeans");i(this,"characterBean");i(this,"gameState");this.p=e,this.mobBeans=new B(this.p);const n=e.createVector(e.width*.5,e.height*.5),t=e.createVector(0,0),s=200;this.characterBean=new C(e,n,t,s),this.gameState="play"}stageUpdate(){this.gameState!=="gameOver"&&(this.mobBeans.update(),this.characterBean.applyGravity(),this.characterBean.update(),this.characterBean.isBeanRemove()===!1&&(this.gameState="gameOver"))}stageRender(){this.mobBeans.draw(),this.characterBean.draw()}characterControl1(){this.characterBean.applyJump()}}const E=a=>{const e=document.createElement("div");e.className="gameOverWindow";const n=document.createElement("h1");n.textContent="\u7BC0\u5206\u3068\u8C46";const t=document.createElement("h2");t.textContent="Game Over!!";const s=document.createElement("p");return s.textContent="\u30DE\u30A6\u30B9\u3092\u30AF\u30EA\u30C3\u30AF\u3059\u308B\u3068\u518D\u958B\u3057\u307E\u3059\u3002",a.appendChild(e),e.appendChild(n),e.appendChild(t),e.appendChild(s),e},S=a=>{const e=document.createElement("div");e.className="startWindow";const n=document.createElement("h1");n.textContent="\u7BC0\u5206\u3068\u8C46";const t=document.createElement("p");t.textContent="\u8C46\u304C\u843D\u3061\u306A\u3044\u3088\u3046\u306B\u305F\u3060\u30DE\u30A6\u30B9\u3092\u30AF\u30EA\u30C3\u30AF\u3059\u308B\u3060\u3051\u3067\u3059\u3002\u843D\u3061\u308B\u3068Game Over\u306B\u306A\u308A\u307E\u3059\u3002";const s=document.createElement("button");return s.textContent="Game Start!!",s.className="startButton",a.appendChild(e),e.appendChild(n),e.appendChild(t),e.appendChild(s),{startWindow:e,startButton:s}},O=a=>{const e=document.createElement("button");e.className="fullScreenButton",e.textContent="fullScreen",a.appendChild(e),e.addEventListener("click",()=>{a.requestFullscreen()})};const c=document.body,l=S(c);O(c);l.startButton.addEventListener("click",()=>{c.removeChild(l.startWindow);let a,e;const n=t=>{const s=()=>{e=new b(t)};t.setup=()=>{t.createCanvas(t.windowWidth,t.windowHeight),t.noStroke(),s(),a=u(t,t.width,t.height)},t.draw=()=>{t.background(0,0,0),t.push(),t.translate(0,0,0),t.image(a,0,0),t.pop(),e.stageUpdate(),e.stageRender(),e.gameState==="gameOver"&&(E(c),t.noLoop()),console.log(e.gameState)},t.windowResized=()=>{t.resizeCanvas(t.windowWidth,t.windowHeight),a=u(t,t.width,t.height)},t.mousePressed=()=>{switch(e.gameState){case"play":e.characterControl1();break;case"gameOver":const o=document.querySelector(".gameOverWindow");if(!(o instanceof HTMLDivElement))throw new Error("Error");c.removeChild(o),s(),t.loop();break}}};new y(n)});
